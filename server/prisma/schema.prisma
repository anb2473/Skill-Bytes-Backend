generator client {
  provider = "prisma-client-js"
  // Docker uses Linux, so Prisma must be configured for Linux
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Message {
  id          Int @id @default(autoincrement())
  icon        String  @default("ðŸ“¢")
  content     String
  bannerColor String @default("#2821fc")
  owner       User @relation(fields: [ownerid], references: [id])
  ownerid     Int
}

model User {
  id        Int @id @default(autoincrement())
  email     String @unique
  passw     String
  username  String? @unique
  fname     String?
  createdAt DateTime @default(now())
  inbox     Message[]
  preferences String[] @default([])
  languages  String @default("JavaScript")
  previouslyCompleted Int[] @default([])
  completedChallenges Int[] @default([])
  openChallenge  Challenge? 
  openChallengeId Int? @unique
  openChallengeUpdatedAt DateTime?
  points Int @default(0)
}

model Challenge {
  id          Int @id @default(autoincrement())
  title       String
  description String
  selectorDescription String
  difficulty  String
  content    String
  tags        String[]
  points      Int @default(0)
  createdAt   DateTime @default(now())
  owner       User? @relation(fields: [ownerid], references: [id])
  ownerid     Int? @unique
  testCases   Json? @default("[]")
  generator   Json? @default("{}")
  functionName String?
  help         String?
}